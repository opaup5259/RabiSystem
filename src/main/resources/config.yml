# ==========================================
#        RabiSystem 核心配置文件
# ==========================================

# 模块开关管理
modules:
  # 灵契模块 (Spirit Module)
  spirit:
    enabled: true
  # 跑尸模块 (Corpse Module)
  corpse:
    enabled: true

# ==========================================
#        Whitelist (白名单) 模块配置
# ==========================================
whitelist:
  enabled: true
  # 玩家同意规则后，控制台执行的指令
  # {player} 会被替换为玩家名
  on-accept-commands:
    #  - "lp user {player} parent set default"
    - "say 欢迎玩家 {player} 正式加入小兔社区喵！"

  # 拒绝规则后的动作
  on-deny-action: "MESSAGE" # 可选: KICK (踢出), MESSAGE (仅发送消息)

  messages:
    prefix: "<gradient:#ff5555:#ffaa00>[RabiWL]</gradient> "
    no-permission: "<red>你没有权限执行此命令。"
    chat-blocked: "<red>在同意规则前，禁止发送聊天消息！"
    command-blocked: "<red>在同意规则前，你只能使用 /wl 相关指令！"

    # 管理员命令反馈
    player-added: "<green>已将玩家 <white>{player}</white> 添加到白名单。"
    player-removed: "<red>已将玩家 <white>{player}</white> 从白名单移除。"
    player-exists: "<yellow>该玩家已在白名单中。"
    player-not-found: "<yellow>该玩家不在白名单中。"
    reload: "<green>配置与数据已重载。"

    # 访客（未在白名单）提示
    visitor-join:
      - "<gray>========================================="
      - "<red><b> 注意：你当前处于访客模式</b>"
      - "<gray>你尚未被列入服务器白名单。"
      - "<gray>你可以参观，但无法进行任何交互。"
      - "<gray>请加群497097164联系管理员申请白名单权限。"
      - "<gray>========================================="

    # 待同意规则（已在白名单，但未同意）提示
    pending-rules:
      - "<gray>========================================="
      - "<yellow><b> 服务器规则说明</b>"
      - "<gray>1. 本服基本无规则，但不可影响其他玩家游戏体验，拿物品需要经过他人同意，不可进行恶意建造卡服、破坏地形的装置与行为，不可恶意破坏他人建筑，如无意破坏请尽快恢复以及道歉"
      - "<gray>2. 不可发布令他人不适的内容，包括但不限于：地域歧视、种族歧视、键政、辱骂、嘲讽、压力等"
      - "<gray>3. 禁止作弊程序、恶意利用Bug等一切破坏游戏体验的不文明行为，如出现以上行为导致影响其他玩家游戏体验请及时道歉"
      - ""
      - "<gray>获得本服白名单进入本服进行游玩，即同意以上规则，规则解释权归服主与管理员所有，违反规则的玩家，服主与管理有权对玩家进行适当处理</gray>"
      - "<gray>请选择是否接受以上规则："
      - "<click:run_command:'/wl accept'><hover:show_text:'<green>点击同意'><green>[同意规则 (Accept)]</green></hover></click>   <click:run_command:'/wl deny'><hover:show_text:'<red>点击拒绝'><red>[拒绝 (Deny)]</red></hover></click>"
      - "<gray>或者在聊天栏输入 <white>'同意'</white> 或 <white>'拒绝'</white>"
      - "<gray>========================================="
      - "服务器交流群：497097164，如有疑问，请联系服主或管理员"

    # 状态反馈
    already-accepted: "<green>你已经同意过规则了，无需再次同意。"
    accept-success: "<green>你已同意服务器规则，权限已解锁！"
    deny-message: "<red>你拒绝了服务器规则。"
    deny-kick: "<red>你需要同意服务器规则才能进行游戏。"
    visitor-actionbar: "<red>⚠ 你不在白名单中，无法进行此操作！"
    action-blocked: "<red>⚠ 请先同意规则 (/wl accept)"

# ==========================================
#        Corpse (跑尸) 模块配置
# ==========================================
corpse:
  # 创造模式豁免
  # 如果为 true，创造模式玩家死亡时将保持原版行为（不生成尸体、不变成幽灵、遵循原版掉落规则）
  creative-bypass: true

  # 尸体保护时间（分钟）
  protection-minutes: 60

  # 传送至尸体附近的随机半径 (格)
  tp-radius: 500

  # 幽灵视觉效果设置
  ghost-visuals:
    # 是否启用夜视 (让原本黑暗的地方可见)
    night-vision: true
    # 是否启用冰冻效果 (屏幕边缘结冰，营造寒冷感)
    freezing-overlay: true
    # 是否强制阴雨天 (让天空变灰，营造压抑感)
    gloomy-weather: true

  # 复活后的状态设置
  revive-stats:
    # 找回尸体 或 出生点复活 (强力状态)
    corpse-retrieval:
      health: 10.0
      food: 8
    # 床复活 (虚弱状态)
    bed-revive:
      health: 6.0
      food: 6

  # 视觉特效配置
  visuals:
    # 是否启用传送时的 GTA 风格运镜动画
    # 注意: 如果服务器网络延迟较高，建议关闭，否则可能会卡顿
    enable-gta-teleport: true

    # GTA 动画拉升高度 (格)
    gta-height: 100

    # 复活时的特效
    # true = 开启, false = 关闭
    enable-revive-distortion: true  # 尸体复活时的扭曲 (反胃效果)
    enable-bed-wakeup: true         # 床复活时的起床模拟 (黑屏+视角抬起)

  sounds:
    # 幽灵状态下的背景音乐 (循环风声)
    ghost-bgm: "MUSIC_DISC_FAR" #"AMBIENT_SOUL_SAND_VALLEY_LOOP"
    ghost-bgm-volume: 1.0
    ghost-bgm-pitch: 1.0

    # 幽灵心跳声 (每秒播放一次)
    ghost-heartbeat: "ENTITY_WARDEN_HEARTBEAT"
    ghost-heartbeat-volume: 1.0
    ghost-heartbeat-pitch: 1.0

    # 复活时的音效
    revive: "BLOCK_BEACON_ACTIVATE"
    revive-volume: 1.0
    revive-pitch: 1.0

    # 捡尸体音效
    corpse-pickup: "ITEM_BUNDLE_DROP_CONTENTS"
    corpse-pickup-volume: 1.0
    corpse-pickup-pitch: 1.0

  # 幽灵前缀 (支持 MiniMessage 格式)
  # 显示在 Tab 列表和聊天栏中
  ghost-prefix: "<gray>[<red>👻<gray>] "

  messages:
    prefix: "<gray>[<gradient:red:gold>WowCorpse</gradient>] <reset>"
    death-title: "<red>你已死亡，灵魂出窍..."
    death-subtitle: "<yellow>尸体坐标: <x>, <y>, <z>"

    # 特殊死亡时的豁免提示
    special-death-bypass: "<green>检测到特殊死亡环境（岩浆/虚空），物品已保留，但你将虚弱复活。"

    soul-status:
      header: "<gray>--------------------------------"
      line1: "<gold>你已进入灵魂状态！"
      line2: "<yellow>寻找你的尸体 (坐标: <x>, <y>, <z>)"
      # 新增传送按钮
      line2-tp: " <green><click:run_command:/rs corpse tpnear>[点击传送至附近]</click>"
      line3-bed: "<aqua>在床边虚弱复活 (右键床)"
      line3-nobed: "<red>未检测到床！ <green><click:run_command:/rs corpse spawnrevive>[点击此处在世界出生点复活]</click>"
      footer: "<gray>--------------------------------"

    # Actionbar 导航提示
    # <distance> = 距离米数, <arrow> = 动态方向箭头
    ghost-actionbar: "<yellow>[<arrow>] <gold>尸体距离: <green><distance>米 <yellow>[<arrow>]"
    # 清理指令提示
    purge-success: "<green>已清理加载区块内的 <count> 个尸体全息悬浮字。"

    # 复活后的额外提示
    revive-reminder: "<gray>物品仍在尸体处。使用 <yellow>/rs corpse info <gray>再次查询坐标。"

    # 新增传送提示
    tp-success: "<green>已传送至尸体附近区域。"
    tp-fail: "<red>传送失败，无法找到安全落脚点。"

    spawn-revive: "<green>你在世界出生点重获新生！"
    corpse-found: "<green>你找回了遗物！"
    inventory-full: "<red>背包空间不足，无法找回！"
    not-owner: "<red>这不是你的尸体，且处于保护期内！剩余: <time>"
    protection-expired: "<green>保护期已过，正在拾取..."
    admin-break: "<red>管理员强制破坏了尸体，物品已掉落。"